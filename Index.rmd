---
title: "Computational Musicology 2021/2022"
output: 
  flexdashboard::flex_dashboard:
    storyboard: true
---

### Introduction

Growing up i have always been listening to all sorts of music. The songs that i did seem to like the most are hip hop songs. I am more of a fan of the older hip hop songs which where trending in the 90s. I think the reason for this is because i feel like they tended to put much more meaning behind the songs then they do nowadays. Also i seem to like the artists like J.cole which would be considered as a modern rapper today to have the best songs. I think the reason for this is because he is so influenced by these 90s artists.Although i do think that i know why i like the 90s hip hop songs more then modern hip hop, i think it will be very interesting to analyze what else is different between these two genres. 


I will be analyzing old school hip vs modern hiphop. I have two playlists that i will use, one is called 'Old School Hiphop' it contains 192 songs and has a total length of 13 hours and 30 minutes. Some of the artists that you will find a lot in this playlist are: Tupac, DMX and Nas. These were the rappers that we most populair in the 90s. The other playlist is called "Modern hiphop". It contains 206 songs and the total length is 10 hours and 12 minutes. This playlist contains music created in the past decade. Some of the artists that are mostly on this playlist are: Pop smoke, J.Cole and Tory lanez. I do not think that there are any particial strange songs in the playlists i have chosen. All the songs i would consider to be in the right place in the playlist. 

An already interesting finding is that the modern playlist is shorter in total length then the old school playlist. Even though the modern playlist contains more songs. Could this mean that the younger people who the modern playlist songs are created for do not like the longer songs anymore? is this just a trend? or is this also the case when you compare the length of songs for other genres. Although all very interesting things to analyze that will be too broad for the scope of this project.

I will analyze what the most obvious differences are between music made in the 90s (old school) and made in the past decade (modern). 



### Visuals

```{r}
knitr::opts_chunk$set(echo = FALSE)

require(httr)
require(jsonlite)
require(plyr)
require(glmnet)
library(spotifyr)
library(knitr)
library(tidyverse)
library(ggplot2)
library(dplyr)
library(readr)
library(kableExtra)

Sys.setenv(SPOTIFY_CLIENT_ID = '269036b6875046f7ab4e49c8f9270a1b')
Sys.setenv(SPOTIFY_CLIENT_SECRET = '75202597e596483e9dd3c19ec1c2a296')
access_token <- get_spotify_access_token()
```

```{r}
knitr::opts_chunk$set(echo = FALSE)

tophits <- get_playlist("0mt5o7nN6PJTyxJIqzgvJr")

#modern
track_list <- tophits[["tracks"]]
item_list <- track_list[["items"]]
track_id <- item_list[,16]
track_id <- as.data.frame(track_id)
num_tracks <- count(track_id)
num_tracks <- as.integer(num_tracks)


#Iterating over track ID's
a <- sapply(track_id[1:100, ], get_track_audio_features)
b <- as.data.frame(a)
zz <- unlist(a)
zm <- data.frame(t(matrix(zz, nrow = 18)))
colnames(zm) <- row.names(b)

music2 <- mutate(zm,
danceability = as.numeric(danceability),
energy = as.numeric(energy),
valence = as.numeric(valence))
```

```{r}

ggplot(music2) +
  #geom_density(aes(x = danceability, fill = "red"), alpha = 0.4) +
  #geom_density(aes(x = energy,fill = "purple"), alpha = 0.4) +
  geom_density(aes(x = valence, fill = "green"), alpha = 0.4) +
  labs(title = "Modern Playlist Valence",
         x = "Measure of Attribute",
         y = "Frequency", fill = "Song Attribute") +
  scale_fill_manual(values = c("purple", "purple", "green"), labels = c("Valence", "Energy", "Valence"))

ggplot(music2) +
  #geom_density(aes(x = danceability, fill = "red"), alpha = 0.4) +
  geom_density(aes(x = energy,fill = "purple"), alpha = 0.4) +
  #geom_density(aes(x = valence, fill = "green"), alpha = 0.4) +
  labs(title = "Modern Playlist Energy",
         x = "Measure of Attribute",
         y = "Frequency", fill = "Song Attribute") +
  scale_fill_manual(values = c("green", "purple", "green"), labels = c("Energy", "Energy", "Valence"))

ggplot(music2) +
  geom_density(aes(x = danceability, fill = "red"), alpha = 0.4) +
  #geom_density(aes(x = energy,fill = "purple"), alpha = 0.4) +
  #geom_density(aes(x = valence, fill = "green"), alpha = 0.4) +
  labs(title = "Modern Playlist Danceability",
         x = "Measure of Attribute",
         y = "Frequency", fill = "Song Attribute") +
  scale_fill_manual(values = c("red", "purple", "green"), labels = c("Danceability", "Energy", "Valence"))

tophits <- get_playlist("2nJsRFJkr7BegSfKpG2d7O")

#old
track_list <- tophits[["tracks"]]
item_list <- track_list[["items"]]
track_id <- item_list[,16]
track_id <- as.data.frame(track_id)
num_tracks <- count(track_id)
num_tracks <- as.integer(num_tracks)


#Iterating over track ID's
a <- sapply(track_id[1:100, ], get_track_audio_features)
b <- as.data.frame(a)
zz <- unlist(a)
zm <- data.frame(t(matrix(zz, nrow = 18)))
colnames(zm) <- row.names(b)

music2 <- mutate(zm,
danceability = as.numeric(danceability),
energy = as.numeric(energy),
valence = as.numeric(valence))


ggplot(music2) +
  #geom_density(aes(x = danceability, fill = "red"), alpha = 0.4) +
  #geom_density(aes(x = energy,fill = "purple"), alpha = 0.4) +
  geom_density(aes(x = valence, fill = "green"), alpha = 0.4) +
  labs(title = "Old School Playlist Valence",
         x = "Measure of Attribute",
         y = "Frequency", fill = "Song Attribute") +
  scale_fill_manual(values = c("purple", "purple", "green"), labels = c("Valence", "Energy", "Valence"))


ggplot(music2) +
  #geom_density(aes(x = danceability, fill = "red"), alpha = 0.4) +
  geom_density(aes(x = energy,fill = "purple"), alpha = 0.4) +
  #geom_density(aes(x = valence, fill = "green"), alpha = 0.4) +
  labs(title = "Old School Playlist Energy",
         x = "Measure of Attribute",
         y = "Frequency", fill = "Song Attribute") +
  scale_fill_manual(values = c("green", "purple", "green"), labels = c("Energy", "Energy", "Valence"))


ggplot(music2) +
  geom_density(aes(x = danceability, fill = "red"), alpha = 0.4) +
  #geom_density(aes(x = energy,fill = "purple"), alpha = 0.4) +
  #geom_density(aes(x = valence, fill = "green"), alpha = 0.4) +
  labs(title = "Old School Playlist Danceability",
         x = "Measure of Attribute",
         y = "Frequency", fill = "Song Attribute") +
  scale_fill_manual(values = c("red", "purple", "green"), labels = c("Danceability", "Energy", "Valence"))
```


### Conclusion

I used 100 tracks for each playlist in my dataset. It is interesting to see that both
playlists seem to have a high valance for a lot of tracks. I personally thought that this
would be lower for the old school songs because I feel like they tend to be more
negative (e.g. Rapping about violence). The old-school playlist scores lower on
energy. I also expected this because these songs have a slower beat. And modern
hip hop songs are a bit more upbeat. Also, the danceability for the songs in the oldschool playlist seem to be higher. 


Definitons of variables used:
Danceability: Describes how suitable a track is for dancing based on a combination of
musical elements including tempo, rhythm stability, beat strength, and overall regularity

Valance: A measure from 0.0 to 1.0 describing the musical positiveness conveyed by a track.
Tracks with high valence sound more positive (e.g. happy, cheerful, euphoric), while tracks
with low valence sound more negative (e.g. sad, depressed, angry)

Energy: Energy is a measure from 0.0 to 1.0 and represents a perceptual measure of
intensity and activity. Typically, energetic tracks feel fast, loud, and noisy. For example,
death metal has high energy, while a Bach prelude scores low on the scale.
Source: rpub
